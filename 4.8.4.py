'''
ÐšÐ»Ð°ÑÑ BirthInfo ðŸŒ¶ï¸
Ð ÐµÐ°Ð»Ð¸Ð·ÑƒÐ¹Ñ‚Ðµ ÐºÐ»Ð°ÑÑ BirthInfo, Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°ÑŽÑ‰Ð¸Ð¹ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¾ Ð´Ð°Ñ‚Ðµ Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ. ÐŸÑ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð° ÐºÐ»Ð°ÑÑ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°Ñ‚ÑŒ Ð¾Ð´Ð¸Ð½ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚:

birth_date â€” Ð´Ð°Ñ‚Ð° Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ, Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð½Ð°Ñ Ð² Ð¾Ð´Ð½Ð¾Ð¼ Ð¸Ð· ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ñ… Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð²:
ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€ ÐºÐ»Ð°ÑÑÐ° date
ÑÑ‚Ñ€Ð¾ÐºÐ° Ñ Ð´Ð°Ñ‚Ð¾Ð¹ Ð² ISO Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ
ÑÐ¿Ð¸ÑÐ¾Ðº Ð¸Ð»Ð¸ ÐºÐ¾Ñ€Ñ‚ÐµÐ¶ Ð¸Ð· Ñ‚Ñ€ÐµÑ… Ñ†ÐµÐ»Ñ‹Ñ… Ñ‡Ð¸ÑÐµÐ»: Ð³Ð¾Ð´Ð°, Ð¼ÐµÑÑÑ†Ð° Ð¸ Ð´Ð½Ñ
Ð•ÑÐ»Ð¸ Ð´Ð°Ñ‚Ð° Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð½ÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾Ð¹ Ð¸Ð»Ð¸ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð° Ð² ÐºÐ°ÐºÐ¾Ð¼-Ð»Ð¸Ð±Ð¾ Ð´Ñ€ÑƒÐ³Ð¾Ð¼ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ, Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð²Ð¾Ð·Ð±ÑƒÐ¶Ð´ÐµÐ½Ð¾ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ TypeError Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼:

ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ð° Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ
Ð­ÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€ ÐºÐ»Ð°ÑÑÐ° BirthInfo Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¸Ð¼ÐµÑ‚ÑŒ Ð¾Ð´Ð¸Ð½ Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ‚:

birth_date â€” Ð´Ð°Ñ‚Ð° Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ Ð² Ð²Ð¸Ð´Ðµ ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð° ÐºÐ»Ð°ÑÑÐ° date
ÐšÐ»Ð°ÑÑ BirthInfo Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¸Ð¼ÐµÑ‚ÑŒ Ð¾Ð´Ð½Ð¾ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð¾:

age â€” ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð¾, Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ, Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÑŽÑ‰ÐµÐµ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚ Ð² Ð³Ð¾Ð´Ð°Ñ…, Ñ‚Ð¾ ÐµÑÑ‚ÑŒ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¿Ð¾Ð»Ð½Ñ‹Ñ… Ð»ÐµÑ‚, Ð¿Ñ€Ð¾ÑˆÐµÐ´ÑˆÐ¸Ñ… Ñ Ð´Ð°Ñ‚Ñ‹ Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ Ð½Ð° ÑÐµÐ³Ð¾Ð´Ð½ÑÑˆÐ½Ð¸Ð¹ Ð´ÐµÐ½ÑŒ
ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ 1. Ð’Ð¾Ð·Ñ€Ð°ÑÑ‚ Ð² Ð³Ð¾Ð´Ð°Ñ… Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÑ‚ÑŒÑÑ Ñ‚Ð°Ðº Ð¶Ðµ, ÐºÐ°Ðº Ð¸ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¹ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÐ°, Ñ‚Ð¾ ÐµÑÑ‚ÑŒ Ð² Ð´ÐµÐ½ÑŒ Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ ÐµÐ³Ð¾ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚ ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð½Ð° Ð¾Ð´Ð¸Ð½ Ð³Ð¾Ð´.

ÐŸÑ€Ð¸Ð²ÐµÐ´ÐµÐ½Ð½Ñ‹Ð¹ Ð½Ð¸Ð¶Ðµ ÐºÐ¾Ð´:

birthinfo = BirthInfo(date(2023, 2, 26))

print(birthinfo.age)
Ð² 2024-02-25 Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ:

0
Ð² 2024-02-26 Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ:

1
Ð² 2025-02-25 Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ:

1
 Ð² 2025-02-26 Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ:

2
ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ 2. Ð”Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ñ‚Ð¾Ð³Ð¾, Ñ‡Ñ‚Ð¾ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð¾ age Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð²ÐµÑ€Ð½Ñ‹Ð¹ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚, Ð¼Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ÑÐ¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½ÑƒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ current_age(), ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÑ‚ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚ Ð² Ð³Ð¾Ð´Ð°Ñ… Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ð´Ð°Ñ‚Ñ‹ Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ Ð¸ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Ð´Ð°Ñ‚Ñ‹.

ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ 3. ÐÐ¸ÐºÐ°ÐºÐ¸Ñ… Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ð¹ ÐºÐ°ÑÐ°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ ÐºÐ»Ð°ÑÑÐ° BirthInfo Ð½ÐµÑ‚, Ð¾Ð½Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð»ÑŒÐ½Ð¾Ð¹.
'''

from functools import singledispatchmethod
from datetime import date,timedelta,datetime
import re

def current_age(birthday, today):
    age = today.year - birthday.year - 1
    age += (today.month, today.day) >= (birthday.month, birthday.day)
    return age


class BirthInfo:
    @singledispatchmethod
    def __init__(self,d):
        raise TypeError ('ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ð° Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ')
      
    @__init__.register(date)
    def _from_init(self,d):
        self.birth_date = d

        
    @__init__.register(str)
    def _from_init(self,d):
        try:
            txt = re.fullmatch(r'\b\d{4}-\d{2}-\d{2}\b',d)
            b = map(int,txt.group().split('-'))
            self.birth_date = date(*b)
        except:
            raise TypeError ('ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ð° Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ')
            
    @__init__.register(list)    
    @__init__.register(tuple)
    def _from_init(self,d):
        self.birth_date = date(*d)
        
    @property
    def birth_date(self):
        return self._birth_date
    
    @birth_date.setter
    def birth_date(self,day):
        self._birth_date = day
        
    @property
    def age(self):
        today = date.today()
        age = today.year - self._birth_date.year-1 
        age += (today.month, today.day) >= (birthday.month, birthday.day)
        return  age

        
'''  
# INPUT DATA:

# TEST_1:
birthinfo1 = BirthInfo('2020-09-18')
birthinfo2 = BirthInfo(date(2010, 10, 10))
birthinfo3 = BirthInfo([2016, 1, 1])

print(birthinfo1.birth_date)
print(birthinfo2.birth_date)
print(birthinfo3.birth_date)

# TEST_2:
birthday = date(2020, 9, 18)
today = date.today()
birthinfo = BirthInfo(birthday)
true_age = current_age(birthday, today)

print(birthinfo.age == true_age)

# TEST_3:
birthinfo1 = BirthInfo('2020-09-18')
birthinfo2 = BirthInfo(date(2010, 10, 10))
birthinfo3 = BirthInfo([2016, 1, 1])

print(type(birthinfo1.birth_date))
print(type(birthinfo2.birth_date))
print(type(birthinfo3.birth_date))

# TEST_4:
birthday = date(2023, 3, 6)
today = date.today()
birthinfo = BirthInfo(birthday)
true_age = current_age(birthday, today)

print(birthinfo.age == true_age)

# TEST_5:
errors = [20200918, True, {1: 'one'}, {1, 2, 3}, 100.9]

for obj in errors:
    try:
        BirthInfo(obj)
    except TypeError as e:
        print(e)
'''
# TEST_6:
today = date.today()
for day in range(10):
    birthday = (today + timedelta(days=day)).replace(year=2000)
    birthinfo = BirthInfo(birthday)
    true_age = current_age(birthday, today)
    print('true_age: ', true_age, 'birthinfo.age :',birthinfo.age,'birthday :',birthday)
    print(birthinfo.age == true_age)

# TEST_7:
birth_dates = ['20200918', '2020-0918', '202009-18', ' 2020-09-18 ', '2020-9-18']

for birth_date in birth_dates:
    try:
        birthinfo1 = BirthInfo(birth_date)
    except TypeError as e:
        print(e)